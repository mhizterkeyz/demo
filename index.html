<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo</title>
  </head>
  <body
    style="
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    "
  >
    <div>
      <input
        type="number"
        placeholder="Enter desired tax amount"
        style="
          border-radius: 4px;
          border: 1px solid #ccc;
          padding: 12px 6px;
          width: 300px;
          max-width: 100%;
        "
      />

      <p>Base: <spna id="base-amount"></spna></p>
      <p>Percentage: <span id="percentage"></span></p>
    </div>
    <script>
      function getBase(preferedTax) {
        if (preferedTax >= 46666.71) {
          return 266667 + ((preferedTax - 46666.71) * 100) / 24;
        }
        if (preferedTax >= 18666.78) {
          return 133334 + ((preferedTax - 18666.78) * 100) / 21;
        }
        if (preferedTax >= 10750.05) {
          return 91667 + ((preferedTax - 10750.05) * 100) / 19;
        }
        if (preferedTax >= 4500) {
          return 50000 + ((preferedTax - 4500) * 100) / 11;
        }

        return 25000 + ((preferedTax - 1750.0000000000002) * 100) / 7;
      }

      document.querySelector("input").addEventListener("input", (e) => {
        const value = Number(e.target.value);
        if (!Number.isNaN(value)) {
          const base = getBase(value);

          document.querySelector("#base-amount").innerText = Number(
            base.toFixed(2)
          ).toLocaleString();
          document.querySelector("#percentage").innerText = +(
            (value / base) *
            100
          )
            .toFixed(2)
            .toLocaleString();
        }
      });
    </script>
  </body>
</html>
